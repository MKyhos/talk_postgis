---
output:
    xaringan::moon_reader:
        lib_dir: libs
        css: ["default", "css/sfah.css", "css/fonts.css"]
        nature:
            highlightStyle: github
            highlightLines: true
            countIncrementalSlides: false
            ratio: "4:3"
            beforeInit: "https://platform.twitter.com/widgets.js"
        seal: false
        includes:
            in_header: header.html
---

```{r setup, include=FALSE, cache=FALSE}

# Packages
library(dplyr)
library(kableExtra)
library(gt)
library(fontawesome)
library(DT)
# Data
```

layout: true

<div class="my-footer">
    <span>
        <a href="https://www.github.com/MKyhos", style="color:white;">
            `r fa(name="github", fill="white")` /MKyhos
        </a>
    </span>
</div>

---

class: middle
background-image: url("http://www.johngordonart.com/wp-content/uploads/2015/02/Elephant-World-Drawing-v2-by-Artist-John-Gordon-1024x1024.jpg")
background-position: bottom right
background-size: 400px 400px
# An Introduction to PostGIS
.fancy2[...PostgreSQL going spatial]


<p style="margin-top:4cm;"> 
    CorrelCon 2020 <br>
    <a href="https://twitter.com/maltekyhos">
        `r fa(name = "twitter")` @maltekyhos
    </a>
</p>


---
class: middle, inverse

# The Case for Spatial Databases


* What they are
* Why we should use them

---

## Often seen approaches


Shapefiles
GeoPackage
...




---

## Ideal Enterprise DB

A system that allows for

- Integration with various tools
    - Desktop applications
    - Server middleware
    - Web Applications
    - Programming languages
- Functions and types
- Scalability, security, reliability, administration


---

## Unified Architecture


---

## DB schema (example)




---
class: middle, inverse 

# Features, Functionality

Underlying libraries & exposed functions

* `libproj`
* `libgeos` 
* `libgdal`
* `libcgal`



---

## `PROJ` -- Geographical Projections


```{sql, eval=FALSE}

ST_Transform(geometry, srid)

```



---

## `GEOS` -- Relationships between Geometries


* Relationships: `ST_Intersects()`, `ST_Contains()`,
    `ST_Touches()`, `ST_Overlaps()`, ...
* Set generation: `ST_Union()`, `ST_Intersection()`, 
    `ST_SymDifference()`, `ST_Difference()`
* New geometries: `ST_Buffer()`
* 


---

## `CGAL` -- 





**Query:** Get post codes intersecting with  
--

```{sql eval=FALSE}
SELECT *
FROM ST_distance(geom)
WHERE;
```
--
***
**Query:** 

--
```{sql eval=FALSE}
SELECT id
FROM
```


---
class: middle, inverse

# Performance

* (Spatial) Indexing
* Database Maintenance


---

## Spatial Indexing


---

## 



---
class: middle, inverse, center

# Questions?

--

Thanks for tuning in!

---

# References

